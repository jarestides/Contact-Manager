<!DOCTYPE html>
<html>
  <head>
    <title>My Contacts</title>
    <!-- stylesheets -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js" rel="stylesheet">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css"
    />
    <link href="css/contactsstyle.css" rel="stylesheet" />

    <!-- scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.18/js/dataTables.bootstrap4.min.js"></script>
    <script type="text/javascript" src="js/contacts.js"></script>
	<script type="text/javascript">
	window.onload = function() 
      {
        isAuthenticated();
      };
	</script>
    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function() 
      {
        searchContact();
      }, false);
    </script>
  </head>
  <body>
      <script>
		function logout() {
			document.cookie = "firstName= ; expires = Thu, 01 Jan 1970 00:00:00 GMT";
			document.cookie = "lastName= ; expires = Thu, 01 Jan 1970 00:00:00 GMT";
			document.cookie = "userId= ; expires = Thu, 01 Jan 1970 00:00:00 GMT";
			window.location.replace("https://mycontacts.fun/");
		}
	  </script>
    <div class="container">
      <nav class="top-nav navbar fixed-top">
        <div class="float-left">
          <h3>My Contacts</h3>
        </div>
          <ul class="nav ml-auto pb-2 flex-row align-items-center">
            <li><h5 class="text-black pr-2 pt-2 d-none d-md-block" id="userName"></h5></li>
            <li class="nav-item dropdown">
                <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="nav-item icon ion-navicon menu-icon" style = "color: black"></i></a>
                <div class="dropdown-menu dropdown-menu-right">
                    <a href="#" onclick="logout()" class="dropdown-item">Logout</a>
                </div>
            </li>
        </ul>
      </nav>
      <button type="button" class="btn btn-primary btn-rounded" data-toggle="modal" data-target="#addContactModalCenter" data-backdrop="static">
        Add a new contact
      </button>
      <div class="modal fade" id="addContactModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" id="addTitle">New Contact</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="resetMessage()">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <form class="form" role="form" autocomplete="off" id="addForm" method="POST">
              <div class="modal-body">
                <div class="form-group">
                  <input class="add-contact" name="firstname" placeholder="First Name" id="firstName">
                  <div class="invalid-feedback">Oops, you missed this one.</div>
                </div>
                <div class="form-group">
                  <input class="add-contact" name="lastname" placeholder="Last Name" id="lastName">
                  <div class="invalid-feedback">Oops, you missed this one.</div>
                </div>
                <div class="form-group">
                  <input class="add-contact" name="phone" placeholder="Phone" id="phoneNum">
                  <div class="invalid-feedback">Oops, you missed this one.</div>
                </div>
                <div class="form-group">
                  <input class="add-contact" name="email" placeholder="Email" id="email">
                  <div class="invalid-feedback">Oops, you missed this one.</div>
                </div>
              </div>
              <h6 id="addMessage" style="text-align:center; color:green;"></h6>
              <div class="modal-footer">
                <button id="addText" type="button" class="btn btn-primary" onclick="addContact()">Add</button>
              </div>
              <span class="text-white" id="addResult"></span>
              </form>
            </div>
          </div>
        </div>
      <div class="row">
        <div class="pt-4 col">
          <div class="rounded">
            <form autocomplete="off" id="searchForm">
              <input
                type="search"
                placeholder="Search for a contact"
                class="searchBar border-0 p-3 bg-light rounded rounded-pill shadow-sm"
                oninput="searchContact()"
                id="searchText"
              />
            </form>
            <div id="search-table">
              <table class="table table-light table-striped rounded" id="resultsTable" data-pagination="true">
                <thead>
                  <tr>
                    <th scope="col">First</th>
                    <th scope="col">Last</th>
                    <th scope="col">Phone</th>
                    <th scope="col">Email</th>
                    <th scope="col">Action</th>
                  </tr>
                </thead>
                <tbody id="search-results"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    <script>
      function resetMessage() {
        document.getElementById(
        "addMessage"
        ).innerHTML = ``;
        searchContact();
      }
      </script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/ionicons@5.0.0/dist/ionicons.js"></script>
  </body>
</html>